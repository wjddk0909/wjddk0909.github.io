I"á`<h2 id="101-vuex-ì„¤ì¹˜-ë°-ë“±ë¡">10.1 Vuex ì„¤ì¹˜ ë° ë“±ë¡</h2>

<p>Vuex ì„¤ì¹˜í•˜ê¸°
<a href="https://vuex.vuejs.org/installation.html#direct-download-cdn">vuejs ê³µì‹ ë¬¸ì„œ</a></p>

<p>NPM</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>// npm <span class="nb">install </span>vuex@next <span class="nt">--save</span> // ê³µì‹ë¬¸ì„œì— ì¨ìˆëŠ” ê±¸ë¡œ ì„¤ì¹˜í•˜ë©´ Vue3ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì„¤ì¹˜ ë˜ë¯€ë¡œ ì½”ì–´ ë¼ì´ë¸ŒëŸ¬ë¦¬ëŠ” ë²„ì „ì„ ëª…ì‹œí•´ì¤˜ì•¼í•¨
npm i vuex@3.4.0
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Yarn</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>// yarn add vuex@next <span class="nt">--save</span>
yarn add vuex@3.4.0 // yarnì„ ì‚¬ìš©í•˜ë©´ yarnìœ¼ë¡œ ì„¤ì¹˜í•´ì•¼ í•¨
</pre></td></tr></tbody></table></code></pre></div></div>

<p>components í´ë”ë‘ ê°™ì€ ë ˆë²¨ì— stor í´ë” ë§Œë“¤ê¸°</p>

<blockquote>
  <p><a href="https://github.com/wjddk0909/vue-lv2/commit/5bc72b82f63929c142affcd6997be802284b70d6">diff check</a></p>
</blockquote>

<h2 id="102-stateì™€-getters-ì†Œê°œ">10.2 stateì™€ getters ì†Œê°œ</h2>

<p>Vuexa ê¸°ìˆ  ìš”ì†Œ</p>
<ul>
  <li>state : ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì— ê³µìœ ë˜ëŠ” ë°ì´í„° <code class="language-plaintext highlighter-rouge">data</code></li>
  <li>getters : ì—°ì‚°ëœ state ê°’ì„ ì ‘ê·¼í•˜ëŠ” ì†ì„± <code class="language-plaintext highlighter-rouge">computed</code></li>
  <li>mutations : state ê°’ì„ ë³€ê²½í•˜ëŠ” ì´ë²¤íŠ¸ ë¡œì§, ë©”ì„œë“œ <code class="language-plaintext highlighter-rouge">methods</code></li>
  <li>actions : ë¹„ë™ê¸° ì²˜ë¦¬ ë¡œì§ì„ ì„ ì–¸í•˜ëŠ” ë©”ì„œë“œ <code class="language-plaintext highlighter-rouge">async methods</code></li>
</ul>

<p>Stateë€?</p>
<ul>
  <li>ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ ê°„ì— ê³µìœ í•  ë°ì´í„° - <code class="language-plaintext highlighter-rouge">ìƒíƒœ</code></li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
</pre></td><td class="rouge-code"><pre><span class="c1">// vue</span>
<span class="nx">data</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Hello Vue.js</span><span class="dl">'</span>
<span class="p">}</span>

<span class="c1">// vuex</span>
<span class="nl">state</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">message</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Hello vue.js
}
</span></pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>
<span class="c">&lt;!-- Vue --&gt;</span>
<span class="nt">&lt;p&gt;</span>{{ message }}<span class="nt">&lt;/p&gt;</span>


<span class="c">&lt;!-- Vuex --&gt;</span>
<span class="nt">&lt;p&gt;</span>{{ this.$store.state.message }}<span class="nt">&lt;/p&gt;</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>gettersë€?</p>
<ul>
  <li>state ê°’ì„ ì ‘ê·¼í•˜ëŠ” ì†ì„±ì´ì <code class="language-plaintext highlighter-rouge">computed()</code> ì²˜ëŸ¼ ë¯¸ë¦¬ ì—°ì‚°ëœ ê°’ì„ ì ‘ê·¼í•˜ëŠ” ì†ì„±</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="c1">// store.js</span>
<span class="nx">state</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">num</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">},</span>
<span class="nx">getters</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">getNumber</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">state</span><span class="p">.</span><span class="nx">num</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="nx">doubleNumber</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">state</span><span class="p">.</span><span class="nx">num</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre>
<span class="nt">&lt;p&gt;</span>{{ this.$store.getters.getNumber }}<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;p&gt;</span>{{ this.$store.getters.doubleNumber }}<span class="nt">&lt;/p&gt;</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="103-ë¦¬íŒ©í† ë§-state-ì†ì„±-ì ìš©">10.3 [ë¦¬íŒ©í† ë§] state ì†ì„± ì ìš©</h2>

<p>store.js</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">const storage</code> ë³€ìˆ˜ë¥¼ ì„¤ì •í•˜ê³  <code class="language-plaintext highlighter-rouge">fetch()</code> í•¨ìˆ˜ì— ê¸°ì¡´ App.vueì—ì„œ <code class="language-plaintext highlighter-rouge">created</code>ë¡œ ê°€ì ¸ì˜¤ë˜ <code class="language-plaintext highlighter-rouge">localStorage</code>ì— ë‹´ê¸´ ë°°ì—´ì„ ë¿Œë ¤ì£¼ëŠ” ë¡œì§ì„ ì˜®ê¸°ê¸°</li>
  <li><code class="language-plaintext highlighter-rouge">state</code>ì—ì„œ <code class="language-plaintext highlighter-rouge">todoItems: storage.fetch()</code>ë¡œ todoItemsì— storageë³€ìˆ˜ì˜ fetch() í•¨ìˆ˜ ì—°ê²°</li>
</ul>

<p>TodoList.vue
<code class="language-plaintext highlighter-rouge">v-for="(todoItem, index) in propsdata"</code> propsdataì—ì„œ ë°˜ë³µë¬¸ì„ ëŒë¦¬ë˜ ê²ƒì„ <code class="language-plaintext highlighter-rouge">v-for="(todoItem, index) in this.$store.state.todoItems</code>ë¡œ ìˆ˜ì •</p>

<blockquote>
  <p><a href="https://github.com/wjddk0909/vue-lv2/commit/91e220b6598930eedb86ccb238517108b1c43578">diff check</a></p>
</blockquote>

<h2 id="104-mutationsá„‹á…ª-commit-á„’á…§á†¼á„‰á…µá†¨-á„‰á…©á„€á…¢">10.4 mutationsá„‹á…ª commit() á„’á…§á†¼á„‰á…µá†¨ á„‰á…©á„€á…¢</h2>

<p>mutationsë€?</p>
<ul>
  <li>stateì˜ ê°’ì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ” ìœ ì¼í•œ ë°©ë²•ì´ì ë©”ì„œë“œ</li>
  <li>ë®¤í…Œì´ì…˜ì€ <code class="language-plaintext highlighter-rouge">commit()</code> ìœ¼ë¡œ ë™ì‘ì‹œí‚¨ë‹¤.</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre><span class="c1">// store.js</span>
<span class="nx">state</span><span class="p">:</span> <span class="p">{</span> <span class="nl">num</span><span class="p">:</span> <span class="mi">10</span> <span class="p">},</span>
<span class="nx">mutations</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">printNumbers</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">state</span><span class="p">.</span><span class="nx">num</span>
    <span class="p">},</span>
    <span class="nx">sumNumbers</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">anotherNum</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">state</span><span class="p">.</span><span class="nx">num</span> <span class="o">+</span> <span class="nx">anotherNum</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">printNumbers</span><span class="dl">'</span><span class="p">);</span>
<span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">sumNumbers</span><span class="dl">'</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>mutationsì˜ commit() í˜•ì‹</p>
<ul>
  <li>stateë¥¼ ë³€ê²½í•˜ê¸° ìœ„í•´ mutationsë¥¼ ë™ì‘ì‹œí‚¬ ë•Œ ì¸ì(payload)ë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŒ</li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="c1">// store.js</span>
<span class="nx">state</span><span class="p">:</span> <span class="p">{</span> <span class="nl">storeNum</span><span class="p">:</span> <span class="mi">10</span> <span class="p">},</span>
<span class="nx">mutations</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">modifyState</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">payload</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">payload</span><span class="p">.</span><span class="nx">str</span><span class="p">)</span>
        <span class="k">return</span> <span class="nx">state</span><span class="p">.</span><span class="nx">storeNum</span> <span class="o">+=</span> <span class="nx">payload</span><span class="p">.</span><span class="nx">num</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">modifyState</span><span class="dl">'</span> <span class="p">{</span>
    <span class="nl">str</span><span class="p">:</span> <span class="dl">'</span><span class="s1">passed from payload</span><span class="dl">'</span><span class="p">,</span>
    <span class="nx">num</span><span class="p">:</span> <span class="mi">20</span>
<span class="p">});</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>ë‘ë²ˆì§¸ ì¸ìë¡œ ê°’ì„ ë„˜ê¸¸ ìˆ˜ ìˆìŒ, ì—¬ëŸ¬ê°œë¥¼ ë³´ë‚¼ë•ŒëŠ” ê°ì²´í˜•íƒœë¡œ ë³´ë‚´ë©´ ëœë‹¤.</p>

<h2 id="105-ë¦¬íŒ©í† ë§í€´ì¦ˆ-mutations-ì ìš©-ë°-í€´ì¦ˆ-ì•ˆë‚´">10.5 [ë¦¬íŒ©í† ë§&amp;í€´ì¦ˆ] mutations ì ìš© ë° í€´ì¦ˆ ì•ˆë‚´</h2>

<p>Store.js</p>
<ul>
  <li>App.vueì˜ <code class="language-plaintext highlighter-rouge">methods</code>ì— ìˆë˜ addOneItemì„ store.jsì˜ <code class="language-plaintext highlighter-rouge">mutations</code>ë¡œ ì˜®ê¸°ê¸°</li>
  <li>addOneItemì˜ ì²«ë²ˆì§¸ ì¸ìë¡œ stateì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ì„œ <code class="language-plaintext highlighter-rouge">state</code> ë„£ê¸°</li>
  <li>TodoInput.vueì—ì„œ ì…ë ¥ëœ ê°’ì„ this.newTodoItemì— ë„£ì–´ì„œ ë³´ë‚´ëŠ”ë° ì´ê²ƒì„ ë°›ê¸° ìœ„í•´ì„œ ë‘ë²ˆì§¸ ì¸ìì— <code class="language-plaintext highlighter-rouge">todoItem</code> ë„£ê¸°</li>
</ul>

<p>TodoInput.vue</p>
<ul>
  <li>ê¸°ì¡´ì— $emitìœ¼ë¡œ ë„˜ê¸°ë˜ ì´ë²¤íŠ¸ë¥¼ <code class="language-plaintext highlighter-rouge">this.$store.commit('addOneItem', this.newTodoItem);</code>ë¡œ storeì˜ mutations ë™ì‘ì‹œí‚´</li>
</ul>

<blockquote>
  <p><a href="https://github.com/wjddk0909/vue-lv2/commit/0a647a9889964d27a75c6ac23bc42305b2df9719">diff check</a></p>
</blockquote>

<h2 id="106-ë¦¬íŒ©í† ë§í€´ì¦ˆ-mutations-í€´ì¦ˆ-í’€ì´-ë°-í• -ì¼-ì§€ìš°ê¸°-ê¸°ëŠ¥-êµ¬í˜„">10.6 [ë¦¬íŒ©í† ë§&amp;í€´ì¦ˆ] mutations í€´ì¦ˆ í’€ì´ ë° í•  ì¼ ì§€ìš°ê¸° ê¸°ëŠ¥ êµ¬í˜„</h2>

<ul>
  <li>removeOneItemì€ ë‘ë²ˆì§¸ ì¸ìë¥¼ ì—¬ëŸ¬ê°œë¥¼ ë°›ì•„ì•¼í•´ì„œ ê°ì²´ í˜•íƒœë¡œ ë³´ë‚´ê¸°</li>
  <li>TodoList.vueì— <code class="language-plaintext highlighter-rouge">const obj = {todoItem, index}</code>ë¡œ ë³€ìˆ˜ì— ê°ì²´ë¡œ ë„£ì–´ì£¼ê³  store.jsì—ì„œ ë‘ë²ˆì§¸ ì¸ìë¡œ payloadë¥¼ ë„£ì–´ì£¼ê³  ì•ˆì—ì„œ <code class="language-plaintext highlighter-rouge">payload.todoItem</code> ìœ¼ë¡œ ì ‘ê·¼</li>
  <li>ë§¤ë²ˆ ê°ì²´ë¥¼ ë³€ìˆ˜ì— ë‹´ì•„ì£¼ê¸°ê°€ ë²ˆê±°ë¡œìš°ë‹ˆ ë°”ë¡œ commit()ì˜ ë‘ë²ˆì§¸ ì¸ìì— <code class="language-plaintext highlighter-rouge">this.$store.commit('removeOneItem', {todoItem, index});</code> ê°ì²´ë¥¼ ë„£ì–´ì¤Œ</li>
</ul>

<h2 id="107-ë¦¬íŒ©í† ë§-mutationsë¡œ-í• -ì¼-ì¶”ê°€-ì™„ë£Œ-ëª¨ë‘-ì‚­ì œ-êµ¬í˜„">10.7 [ë¦¬íŒ©í† ë§] mutationsë¡œ í•  ì¼ ì¶”ê°€, ì™„ë£Œ, ëª¨ë‘ ì‚­ì œ êµ¬í˜„</h2>

<ul>
  <li>App.vue í•„ìš”ì—†ëŠ” ë¶€ë¶„ ì •ë¦¬</li>
</ul>

<blockquote>
  <p><a href="https://github.com/wjddk0909/vue-lv2/commit/fb5fcfa49dc1a75a48b9bfdeb7de8da2157c801c">diff check</a></p>
</blockquote>

<h2 id="108-ì™œ-mutationsë¡œ-ìƒíƒœë¥¼-ë³€ê²½í•´ì•¼-í•˜ëŠ”ê°€">10.8 ì™œ mutationsë¡œ ìƒíƒœë¥¼ ë³€ê²½í•´ì•¼ í•˜ëŠ”ê°€?</h2>

<ul>
  <li>ì—¬ëŸ¬ ê°œì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ì•„ë˜ì™€ ê°™ì´ state ê°’ì„ ë³€ê²½í•˜ëŠ” ê²½ìš° <code class="language-plaintext highlighter-rouge">ì–´ëŠ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•´ë‹¹ stateë¥¼ ë³€ê²½í–ˆëŠ”ì§€ ì¶”ì í•˜ê¸° ì–´ë µë‹¤.</code></li>
</ul>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre><span class="nx">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">increaseCounter</span><span class="p">()</span> <span class="p">{</span> <span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">counter</span><span class="o">++</span><span class="p">;}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>íŠ¹ì • ì‹œì ì— ì–´ë–¤ ì»´í¬ë„ŒíŠ¸ê°€ stateë¥¼ ì ‘ê·¼í•˜ì—¬ ë³€ê²½í•œ ê±´ì§€ í™•ì¸í•˜ê¸° ì–´ë µê¸° ë•Œë¬¸</li>
  <li>ë”°ë¼ì„œ, ë·°ì˜ ë°˜ì‘ì„±ì„ ê±°ìŠ¤ë¥´ì§€ ì•Šê²Œ ëª…ì‹œì ìœ¼ë¡œ ìƒíƒœ ë³€í™”ë¥¼ ìˆ˜í–‰. ë°˜ì‘ì„±, ë””ë²„ê¹…, í…ŒìŠ¤íŒ… í˜œíƒ</li>
  <li>stateëŠ” ì—¬ëŸ¬ê°œì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ê³µìœ í•˜ê³  ìˆê¸° ë•Œë¬¸ì— íŠ¹ì • ì»´í¬ë„ŒíŠ¸ì—ì„œ ë³€ê²½í–ˆì„ë•Œ ì¶”ì ì„ í•´ì•¼í•œë‹¤. 10ê°œì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë³€ê²½í•œë‹¤ê³  í–ˆì„ë•Œ ì–´ëŠì‹œì ì— ì–´ëŠ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë³€ê²½í–ˆëŠ”ì§€ ì•Œê¸°ê°€ ì–´ë ¤ì›€, mutationsë¥¼ ê±°ì³ì•¼ ë·° ê°œë°œì ë„êµ¬ì—ì„œ ì¶”ì ì´ ê°€ëŠ¥í•˜ë‹¤.(ì–´ë–»ê²Œâ€¦?)</li>
</ul>

<h2 id="109-actions-ì†Œê°œ-ë°-ì˜ˆì œ">10.9 actions ì†Œê°œ ë° ì˜ˆì œ</h2>

<p>actionsë€?</p>
<ul>
  <li>ë¹„ë™ê¸° ì²˜ë¦¬ ë¡œì§ì„ ì„ ì–¸í•˜ëŠ” ë©”ì„œë“œ, ë¹„ë™ê¸° ë¡œì§ì„ ë‹´ë‹¹í•˜ëŠ” mutations</li>
  <li>ë°ì´í„° ìš”ì²­, Promise, ES6 asyncì™€ ê°™ì€ ë¹„ë™ê¸° ì²˜ë¦¬ëŠ” ëª¨ë‘ actionsì— ì„ ì–¸</li>
</ul>

<blockquote>
  <p><a href="https://joshua1988.github.io/web-development/javascript/promise-for-beginners/">Promise ì´í•´í•˜ê¸°</a>
<a href="https://joshua1988.github.io/web-development/javascript/javascript-asynchronous-operation/">ìë°”ìŠ¤í¬ë¦½íŠ¸ ë¹„ë™ê¸° ì²˜ë¦¬ ì´í•´í•˜ê¸°</a></p>
</blockquote>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="c1">// store.js</span>
<span class="nx">state</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">num</span><span class="p">:</span> <span class="mi">10</span>
<span class="p">},</span>
<span class="nx">mutations</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">doubleNumber</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">state</span><span class="p">.</span><span class="nx">num</span> <span class="o">*</span> <span class="mi">2</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">},</span>
<span class="nx">actions</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">delayDoubleNumber</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// contextë¡œ storeì˜ ë©”ì„œë“œì™€ ì†ì„± ì ‘ê·¼</span>
        <span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">doubleNumber</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="c1">// App.vue</span>
<span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="dl">'</span><span class="s1">delayDoubleNumber</span><span class="dl">'</span><span class="p">);</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>actions ë¹„ë™ê¸° ì½”ë“œ ì˜ˆì œ1</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="c1">// store.js</span>
<span class="nx">mutations</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">addCounter</span><span class="p">(</span><span class="nx">state</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">state</span><span class="p">.</span><span class="nx">counter</span><span class="o">++</span>
    <span class="p">},</span>
<span class="p">},</span>
<span class="nx">actions</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">delayedAddCounter</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">setTimeout</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">addCounter</span><span class="dl">'</span><span class="p">),</span> <span class="mi">2000</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c1">// App.vue</span>
<span class="nx">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">incrementCounter</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="dl">'</span><span class="s1">delayedAddCounter</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>mutationsëŠ” commitì´ë¼ëŠ” apië¡œ í˜¸ì¶œí•˜ê³  actionsëŠ” dispatchë¼ëŠ” apië¡œ í˜¸ì¶œ</li>
</ul>

<p>actions ë¹„ë™ê¸° ì½”ë“œ ì˜ˆì œ2</p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="c1">// store.js</span>
<span class="nx">mutations</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">setData</span><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">fetchedData</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">state</span><span class="p">.</span><span class="nx">product</span> <span class="o">=</span> <span class="nx">fetchedData</span>
    <span class="p">},</span>
<span class="p">},</span>
<span class="nx">actions</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">fetchProductData</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">axios</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="dl">'</span><span class="s1">https://domain.com/products/1</span><span class="dl">'</span><span class="p">)</span>
                    <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">response</span> <span class="o">=&gt;</span> <span class="nx">context</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">setData</span><span class="dl">'</span><span class="p">,</span> <span class="nx">response</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="c1">// App,vue</span>
<span class="nx">methods</span><span class="p">:</span> <span class="p">{</span>
    <span class="nx">getProduct</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">$store</span><span class="p">.</span><span class="nx">dispatch</span><span class="p">(</span><span class="dl">'</span><span class="s1">fetchProductData</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<ul>
  <li>getProduct()ë©”ì„œë“œë¥¼ ì‹¤í–‰í•˜ë©´ actionsì˜ fetchProductDataë¥¼ ì‹¤í–‰</li>
  <li>axiosê°€ getì´ë¼ëŠ” http ìš”ì²­ì„ ì„œë²„ì— ë³´ë‚¸ë‹¤.</li>
  <li>ë°›ì•„ì˜¤ë©´ thenì´ë¼ëŠ” Promise ì½œë°±ìœ¼ë¡œ ì‘ë‹µì„ ë°›ì•„ì„œ ì‘ë‹µì„ setData() mutationsë¥¼ ì‹¤í–‰í•´ì„œ ì‘ë‹µì„ ì¸ìë¡œ ë„˜ê¸´ë‹¤.</li>
  <li>mutationsì—ì„œ stateì˜ productì— ì ‘ê·¼í•´ ì„œë²„ì—ì„œ ë°›ì•„ì˜¨ ì‘ë‹µê°’(response)ì„ fetchedDataì— ë„£ì–´ì¤€ë‹¤.</li>
</ul>

<h2 id="1010-ì™œ-actionsì—-ë¹„ë™ê¸°-ë¡œì§ì„-ì„ ì–¸í•´ì•¼-í•˜ëŠ”ê°€">10.10 ì™œ actionsì— ë¹„ë™ê¸° ë¡œì§ì„ ì„ ì–¸í•´ì•¼ í•˜ëŠ”ê°€?</h2>

<ul>
  <li>ì–¸ì œ ì–´ëŠ ì»´í¬ë„ŒíŠ¸ì—ì„œ í•´ë‹¹ stateë¥¼ í˜¸ì¶œí•˜ê³ , ë³€ê²½í–ˆëŠ”ì§€ í™•ì¸í•˜ê¸°ê°€ ì–´ë ¤ì›€
    <ul>
      <li>ì—¬ëŸ¬ê°œì˜ ì»´í¬ë„ŒíŠ¸ì—ì„œ mutationsë¡œ ì‹œê°„ì°¨ë¥¼ ë‘ê³  stateë¥¼ ë³€ê²½í•˜ë©´ ê°’ì˜ ë³€í™”ë¥¼ ì¶”ì í•˜ê¸° ì–´ë µê¸° ë•Œë¬¸ì— mutations ì†ì„±ì—ëŠ” ë™ê¸° ì²˜ë¦¬ ë¡œì§ë§Œ ë„£ì–´ì•¼ í•œë‹¤.</li>
    </ul>
  </li>
</ul>
:ET